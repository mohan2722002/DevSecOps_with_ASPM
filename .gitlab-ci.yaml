gitleaks_scan:
  stage: security
  image:
    name: zricethezav/gitleaks
    entrypoint: [""]
  script:
    - gitleaks detect --source . --report-format json --report-path gitleaks-report.json --verbose
  artifacts:
    paths:
      - gitleaks-report.json
    when: always
  allow_failure: true   # <-- Pipeline will show job as "passed" even if leaks are found
